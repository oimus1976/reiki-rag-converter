---
title: "Golden Set 別表抽出仕様"
doc_type: design_spec
version: "v1.0"
status: fixed
scope: golden_set
target:
  - k518RG00000200.html
  - k518RG00000205.html
  - k518RG00000219.html
authoring_policy:
  html_filename: preserve
  reasoning_basis: primary_html_only
created_at: 2026-01-23
---

# Golden Set 別表抽出仕様（v1.0）

## 1. 目的と位置づけ

本仕様は、かつらぎ町例規HTMLを入力として、

- 条例本文に内包される **「別表（付属表）」**
- 特に **HTML `<table>` によって表現された別表**

を **決定的・再現可能に抽出**するための  
**Golden Set 基準仕様**である。

本仕様は、以下の条例HTMLを **ゴールデンケース**として固定する。

- `k518RG00000200.html`（かつらぎ町財務規則）
- `k518RG00000205.html`（かつらぎ町税条例）
- `k518RG00000219.html`（かつらぎ町使用料、手数料、督促及び延滞金条例）

---

## 2. 対象範囲（Scope）

### 2.1 抽出対象とする別表

次の **すべてを満たすもの**を抽出対象とする。

1. 当該条例HTMLの本文内に存在すること  
2. **「別表第◯」が見出しとして存在すること**  
3. 当該見出しの **論理的配下** に `<table>` が存在すること  

この定義により、  
「別表を *持つ* 条例」と「別表を *参照するだけ* の条例」を明確に分離する。

---

### 2.2 抽出対象外（明示的除外）

以下は本仕様の対象外とする。

- 他条例の別表を参照しているのみの記述  
- 様式（申請書・届出書等）  
- `<table>` を持たない別表（文章列挙型）  
- 画像のみで構成された別表  
- 沿革・書誌・目次等の UI 補助テーブル  

---

## 3. 別表見出しの検出仕様

### 3.1 見出しとして認定する条件

次の条件を満たす要素を **別表見出し**と認定する。

- テキストに `別表第` を含む  
- かつ、以下のいずれかの構造を持つ  
  - `div.arttitle`  
  - `p.arttitle`  
  - `a[name]` を含む見出しブロック  

#### 例

```html
<div class="arttitle">
  <a name="...">別表第1</a>
</div>
```

---

### 3.2 見出し情報として取得する項目

- `annex_number`
  - 例：`別表第1`
- `annex_caption`（任意）
  - 括弧書き・補足タイトルがある場合に取得

---

## 4. table 抽出範囲の定義（最重要）

### 4.1 探索範囲

別表見出しノードを起点とし、

- 次の別表見出し
- または次の条・章・附則等の見出し

が現れるまでの範囲を、
当該別表の **有効探索範囲**とする。

---

### 4.2 table 認定条件

以下を満たす `<table>` のみを抽出対象とする。

- 有効探索範囲内に存在する
- 本文（primary content）配下に存在する
- 沿革・書誌・目次領域に属さない

`<table>` が複数存在する場合は、
**同一別表内の複数テーブル**としてすべて取得する。

---

## 5. 抽出単位と識別子

### 5.1 抽出単位

- **1 別表 = 1 抽出単位**
- 別表内に複数 table が存在しても、論理的に同一であれば同一単位とする

---

### 5.2 内部識別子（IR用）

HTMLファイル名は変更せず、内部識別子のみ付与する。

```text
<条例ID>::annex::<別表番号>
```

例：

```text
k518RG00000219::annex::1
```

---

## 6. 中間表現（IR）の必須要素

抽出結果は、最低限以下の情報を保持する。

- `source_html`
  - 例：`k518RG00000219.html`
- `annex_number`
  - 例：`別表第1`
- `annex_caption`
  - 例：`使用料一覧`
- `tables`
  - `table_index`
  - `headers`（列名）
  - `rows`（セル値の配列）

本IRを基に、Markdown / CSV を生成する。

---

## 7. Golden Set における合格基準

Golden Set 条例に対して、以下を満たすことを **合格条件**とする。

### 7.1 抽出されるべきもの

- 財務規則：別表が漏れなく抽出される
- 税条例：税率表が抽出される
- 使用料等条例：使用料・手数料・延滞金の別表が抽出される

### 7.2 抽出されてはならないもの

- 別表参照のみの条例（例：`k518RG00000030.html`）
- 沿革・書誌用テーブル

---

## 8. 非目標（Non-Goals）

本仕様では次を扱わない。

- rowspan / colspan の正規化（次のフェーズ以降）
- 様式抽出（次のフェーズ以降）
- 画像別表のOCR
- 表の意味解釈・計算処理（単位換算・計算等）

---

## 9. 状態宣言

本仕様は **Golden Set 別表抽出仕様 v1.0** として確定する。
以後の実装・評価・回帰テストは本仕様を基準とする。
